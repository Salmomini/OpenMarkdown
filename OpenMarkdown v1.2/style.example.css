/*!
 * OpenMarkdown Theme
 * Copyright © 2025 Leon D.
 * All Rights Reserved.
 *
 * This theme may not be modified, redistributed,
 * or reused outside the official OpenMarkdown project.
 */

/*********************************
  Palette & metrics
**********************************/
:root {
  --bg: #ffffff;            /* page background */
  --surface: #f9f9fb;       /* primary writing surface */
  --text: #1e1e1e;          /* main text */
  --muted: #555a64;         /* secondary text */
  --divider: #e0e0e5;       /* section dividers & rules */
  --border: #d1d5db;        /* element borders */

  --link: #0066cc;          /* links */
  --link-visited: #663399;  

  --inline-bg: #f1f3f5;     /* inline code pill */
  --inline-border: #d8dbe0; 
  --inline-text: #1e1e1e;

  --code-bg: #f6f8fa;       /* code block body */
  --code-head: #eaeef2;     /* code title bar */
  --code-border: #d1d5db;   /* code border */
  --code-text: #1f2937;

  --table-head: #f9f9f9;    /* match blockquote & code bg */
  --table-row: #ffffff;    /* no zebra tint, pure white */
  --table-border: #e0e0e5; /* reuse divider tone */

  --checkbox: #2563eb;      /* blue check */

  --content-width: 820px;   /* document width */
}

/*** 
  Base layout
**********************************/
html, body { background: var(--bg); color: var(--text); }
body {
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  font-size: 16px;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#write {
  max-width: var(--content-width);
  margin: 24px auto 96px;
  padding: 0 28px 64px;
}

/*********************************
  Headings
**********************************/
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6 {
  color: var(--text);
  font-weight: 700;
  line-height: 1.25;
  margin: 28px 0 8px;
}
#write h1 { font-size: 28px; }
#write h2 { font-size: 22px; }
#write h3 { font-size: 18px; }
#write h4 { font-size: 14px; color: var(--muted); letter-spacing: .02em; }
#write h5 { font-size: 13px; color: var(--muted); }
#write h6 { font-size: 12px; color: var(--muted); text-transform: uppercase; letter-spacing: .08em; }

/*********************************
  Text & emphasis
**********************************/
#write p { line-height: 1.75; margin: 12px 0; }
#write p.tight-after { margin-bottom: 4px; }
#write strong { font-weight: 700; }
#write em { font-style: italic; }
#write del { opacity: .65; text-decoration-thickness: 1px; }

#write a { color: var(--link); text-underline-offset: 3px; }
#write a:visited { color: var(--link-visited); }

/* Inline code pill */
#write code, #write tt {
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
  font-size: .92em;
  vertical-align: middle !important;
  background: rgba(0, 0, 0, 0.07);
  color: #1f2937;
  border: 1px solid rgba(0, 0, 0, 0.06);
  border-radius: 4px;
  padding: .08em .32em;
}

#write img {
  display: block;
  margin: 16px auto;
  max-width: 100%;
  height: auto;
}

/* Keyboard keys */
#write kbd {
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
  font-size: .85em;
  padding: .15em .45em;
  border-radius: 6px;
  border: 1px solid var(--border);
  border-bottom-width: 2px;
  background: #f3f4f6;
}

/*********************************
  Lists & checklist
**********************************/
#write ul, #write ol { margin: 8px 0 16px 0; padding-left: 1.4rem; }
#write li { margin: 6px 0; }
#write li > p { margin: 6px 0; }

/* Task list checkboxes */
#write .task-list-item {
  list-style: none;
  display: flex;
  align-items: flex-start;
  gap: 0.55em;
  margin-left: -1.4rem; /* cancel ul padding for alignment */
}
#write .task-list-item input[type="checkbox"] {
  margin: 0.2em 0 0 0;
  flex: 0 0 auto;
}
#write .task-list-item input[type="checkbox"] {
  width: 1.1em; height: 1.1em; vertical-align: -2px; cursor: pointer;
  appearance: none; outline: none;
  border-radius: 6px; border: 2px solid #c7cbd3; background: #ffffff;
  position: relative;
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.02);
}
#write .task-list-item input[type="checkbox"]:checked {
  border-color: var(--checkbox);
  background: var(--checkbox);
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23fff' stroke-width='3.5' stroke-linecap='round' stroke-linejoin='round'><path d='M5 12.5l4.5 4.5L19 7.5'/></svg>");
  background-repeat: no-repeat;
  background-position: center;
  background-size: 78% 78%;
}
#write .task-list-item input[type="checkbox"]:checked::after {
  content: "";
}

/*********************************
  Rules & spacing
**********************************/
#write hr { height: 1px; border: 0; background: var(--divider); margin: 24px 0; }

/*********************************
  Blockquotes
**********************************/
#write blockquote {
  margin: 14px 0; padding: 8px 16px;
  border-left: 3px solid var(--divider);
  color: var(--muted);
  background: #f9f9f9;
}
#write blockquote p { margin: 8px 0; }

/*********************************
  Callouts
**********************************/
#write .callout {
  --callout-color: #2563eb;
  margin: 16px 0;
  padding: 12px 16px;
  border-radius: 10px;
  border: 1px solid var(--divider);
  border-left: 4px solid var(--callout-color);
  background: var(--surface);
}
#write .callout-title {
  font-weight: 700;
  color: var(--callout-color);
  margin-bottom: 6px;
}
#write .callout-body > :first-child { margin-top: 0; }
#write .callout-body > :last-child { margin-bottom: 0; }

/*********************************
  Code blocks — rounded with header bar (Light Theme)
**********************************/
#write pre, #write .md-fences {
  font-size: 1rem;
  background: #f9f9f9; /* light background */
  border-radius: 12px;
  padding: 2.5em 1.5em 1.5em 1.5em !important;
  margin-top: 24px;
  font-family: var(--monospace-font, "Sarasa Mono SC", "Source Han Mono", "Space Mono", "Inconsolata", monospace);
  font-size: 14px !important;
  line-height: 20px !important;
  white-space: pre-wrap;
  overflow-x: hidden;
  overflow-y: auto;
  word-break: break-word;
  overflow-wrap: anywhere;
  position: relative;
}
#write p + pre,
#write p + .md-fences {
  margin-top: 12px;
}
#write pre code {
  background: transparent;
  border: 0;
  padding: 0;
  white-space: pre-wrap;
  display: block;
  font-family: inherit;
  font-size: inherit;
  line-height: inherit;
  border-radius: 0 !important;
}
#write pre.mermaid {
  text-align: center;
}

/* Title bar (```lang title=filename) */
#write .md-fences[lang] {
  position: relative;
  margin-top: 32px;
}
#write .md-fences[lang]::before {
  content: attr(lang);
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 24px;
  background: #f9f9f9; /* same as code block */
  color: #555; /* darker muted text */
  font-family: "Inter", ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica Neue, Arial, sans-serif;
  font-size: 0.95rem;
  line-height: 26px;
  padding-left: 18px;
  padding-top: 5px;
  border-top-left-radius: 12px;
  border-top-right-radius: 12px;
  box-sizing: border-box;
  text-transform: lowercase;
}

/* Hide code block header for mermaid */
#write .md-fences[lang="mermaid"]::before {
  content: none !important;
  display: none !important;
}

/* Source-code mode (CodeMirror) */
#write .md-fences .CodeMirror {
  background: #ffffff !important; /* white editor */
  border-radius: 12px !important;
  padding: 2.5em 1.5em !important;
  color: #2c2c2c; /* dark text */
}

/* Font sizing consistency */
#write .md-fences .CodeMirror,
#write .md-fences .CodeMirror pre {
  font-size: 14px !important;
}

#write .md-fences .CodeMirror-line,
#write .md-fences pre.CodeMirror-line,
#write .md-fences .CodeMirror-code,
#write .md-fences .CodeMirror pre {
  line-height: 20px !important;
  background: transparent !important;
  border-radius: 0 !important;
}

/* Reset extra spacing */
#write .md-fences .CodeMirror,
#write .md-fences .CodeMirror-scroll,
#write .md-fences .CodeMirror-sizer,
#write .md-fences pre,
#write .md-fences .CodeMirror-code,
#write .md-fences .CodeMirror-line,
#write .md-fences pre.CodeMirror-line,
#write .md-fences .CodeMirror-line > span,
#write .md-fences .CodeMirror-line > span *,
#write .md-fences .CodeMirror-measure,
#write .md-fences pre.CodeMirror-line-like {
  line-height: 20px !important;
  font-size: inherit !important;
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace !important;
  background: transparent !important;
  border-radius: 0 !important;
}

#write .md-fences .CodeMirror,
#write .md-fences .CodeMirror-lines,
#write .md-fences .CodeMirror-code,
#write .md-fences .CodeMirror pre,
#write .md-fences pre.CodeMirror-line,
#write .md-fences .CodeMirror-line {
  padding: 0 !important;
  margin: 0 !important;
  line-height: 20px !important;
  font-size: 14px !important;
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace !important;
  background: transparent !important;
  border-radius: 0 !important;
}

#write .md-fences .CodeMirror-lines,
#write .md-fences .CodeMirror-code,
#write .md-fences .CodeMirror-code > div,
#write .md-fences .CodeMirror pre,
#write .md-fences pre.CodeMirror-line {
  margin: 0 !important;
  padding: 0 !important;
}

/* Cursor */
#write .md-fences .cm-s-inner .CodeMirror-cursor {
  border-left: 1px solid #000000 !important;
  height: auto !important;
}
#write .md-fences .CodeMirror .CodeMirror-cursor {
  border-left: 1px solid #000000 !important;
  height: auto !important;
}
#write .md-fences .cm-s-inner .CodeMirror-gutters {
  width: 0 !important;
  opacity: 0 !important;
  pointer-events: none;
}
#write .md-fences .cm-s-inner .CodeMirror-linenumber {
  opacity: 0 !important;
}

/* Syntax highlighting palette copied from the screenshot */
#write .md-fences .cm-s-inner .cm-keyword {
  color: #005cc5 !important; /* blue keywords like def, try, import */
}

#write .md-fences .cm-s-inner .cm-def {
  color: #6f42c1 !important; /* purple function names, e.g., print */
}

#write .md-fences .cm-s-inner .cm-variable,
#write .md-fences .cm-s-inner .cm-variable-2,
#write .md-fences .cm-s-inner .cm-variable-3,
#write .md-fences .cm-s-inner .cm-property {
  color: #d73a49 !important; /* red identifiers like hello world */
}

#write .md-fences .cm-s-inner .cm-string {
  color: #22863a !important; /* green strings like "Hello World" */
}

#write .md-fences .cm-s-inner .cm-number,
#write .md-fences .cm-s-inner .cm-atom {
  color: #b31d28 !important; /* maroon numbers like 1, 2 */
}

#write .md-fences .cm-s-inner .cm-operator {
  color: #24292e !important; /* neutral for +, =, etc. */
}

#write .md-fences .cm-s-inner .cm-comment {
  color: #6a737d !important; /* gray comments */
  font-style: italic;
}

#write .md-fences .cm-s-inner .cm-bracket {
  color: #24292e !important; /* black brackets */
}

#write .md-fences .cm-s-inner .cm-error,
#write .md-fences .cm-s-inner .cm-invalidchar {
  color: #b31d28 !important;
  border-bottom: 1px dotted #b31d28 !important;
}
/*********************************
  Callout / Admonition Blocks
**********************************/
#write .md-alert,
#write .md-alert-info,
#write .md-alert-note,
#write .md-alert-tip,
#write .md-alert-warning,
#write .md-alert-danger,
#write .md-alert-important,
#write .md-alert-caution {
  --callout-color: #2563eb;
  border-radius: 14px;
  padding: 18px 22px;
  margin: 18px 0;
  border: 1.5px solid color-mix(in srgb, var(--callout-color) 35%, #ffffff);
  background:
    linear-gradient(
      180deg,
      color-mix(in srgb, var(--callout-color) 10%, #ffffff),
      color-mix(in srgb, var(--callout-color) 6%, #ffffff)
    );
  box-shadow: 0 6px 16px rgba(16, 24, 40, 0.06);
}

/* INFO / NOTE */
#write .md-alert-info,
#write .md-alert-note {
  --callout-color: #2563eb;
  background: #f2f6ff;
  border-color: #b9ccff;
}

/* TIP */
#write .md-alert-tip {
  --callout-color: #059669;
  background: #f1fff6;
  border-color: #a7f3d0;
}

/* WARNING */
#write .md-alert-warning {
  --callout-color: #b45309;
  background: #fff9e6;
  border-color: #fde68a;
}

/* DANGER */
#write .md-alert-danger {
  --callout-color: #dc2626;
  background: #fff2f2;
  border-color: #fecaca;
}

/* IMPORTANT */
#write .md-alert-important {
  --callout-color: #7c3aed;
  background: #f6f2ff;
  border-color: #d4b8ff;
}

/* CAUTION */
#write .md-alert-caution {
  --callout-color: #ea580c;
  background: #fff8f0;
  border-color: #fbc2a4;
}

/* Title inside callouts */
#write .md-alert > p:first-child {
  margin: 0 0 12px 0;
  font-weight: 700;
  color: var(--callout-color);
  text-transform: none;
  letter-spacing: 0.01em;
}
#write .md-alert > p:first-child strong {
  font-weight: 700;
}

#write .md-alert > :last-child { margin-bottom: 0; }

/*********************************
  Tables
**********************************/
#write table { width: 100%; border-collapse: separate; border-spacing: 0; margin: 16px 0 24px; }
#write thead { background: var(--table-head); }
#write th, #write td {
  padding: 10px 12px;
  border-bottom: 1px solid var(--table-border);
  text-align: left;
}
#write tbody tr:nth-child(odd) { background: var(--table-row); }
#write tbody tr:last-child td { border-bottom: none; }
#write th { font-weight: 600; color: var(--text); }

/*********************************
  Images / figures
**********************************/
#write img { display: block; max-width: 100%; height: auto; border-radius: 10px; }
#write figcaption { color: var(--muted); text-align: center; font-size: .9rem; margin-top: 8px; }

/*********************************
  TOC & footnotes
**********************************/
#write .md-toc { background: transparent; border: 1px solid var(--divider); border-radius: 10px; padding: 12px 14px; }
#write .md-toc-item { color: var(--link); }
#write .md-footnote {
  color: var(--muted);
  background: #f3f4f6;
  border-radius: 4px;
  padding: 2px 4px;
}

/*********************************
  Selection
**********************************/
::selection { background: rgba(37,99,235,.25); color: var(--text); }

#write pre code::selection, 
#write .md-fences code::selection {
  background: rgba(180, 180, 180, 0.35);
  color: var(--text);
}
#write .md-fences .CodeMirror pre {
  white-space: pre-wrap !important;
  word-break: break-word !important;
  overflow-wrap: anywhere !important;
}



#write .md-math-block .CodeMirror-line,
#write .md-math-block pre.CodeMirror-line,
#write .md-math-block .CodeMirror pre {
  background: transparent !important;
  padding: 0 !important;
  margin: 0 !important;
  border-radius: 0 !important;
  line-height: normal !important;
}

/*********************************
  Print fixes — avoid split headers
**********************************/
@media print {
  /* General page setup */
  body {
    background: #ffffff !important;
  }

  #write {
    margin: 0 auto !important;
    padding: 0 !important;
  }

  /* Prevent headings from being orphaned */
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
    break-after: avoid;
    page-break-inside: avoid;
    break-inside: avoid;
  }

  /* Ensure headings always stay with the following content block */
  h1 + p,
  h2 + p,
  h3 + p,
  h4 + p,
  h5 + p,
  h6 + p,
  h1 + ul,
  h2 + ul,
  h3 + ul,
  h4 + ul,
  h5 + ul,
  h6 + ul,
  h1 + ol,
  h2 + ol,
  h3 + ol,
  h4 + ol,
  h5 + ol,
  h6 + ol,
  h1 + pre,
  h2 + pre,
  h3 + pre,
  h4 + pre,
  h5 + pre,
  h6 + pre,
  h1 + .md-fences,
  h2 + .md-fences,
  h3 + .md-fences,
  h4 + .md-fences,
  h5 + .md-fences,
  h6 + .md-fences {
    page-break-before: avoid;
    break-before: avoid;
  }

  /* Prevent code blocks and their title bars from splitting */
  pre,
  .md-fences {
    page-break-inside: avoid;
    break-inside: avoid;
  }

  /* Ensure the title bar stays with the code block */
  .md-fences[lang]::before {
    page-break-after: avoid;
    break-after: avoid;
  }


  /* Reduce chance of single-line leftovers */
  p,
  li {
    orphans: 4;
    widows: 4;
  }

  /* Keep tables and blockquotes together when possible */
  table,
  thead,
  tbody,
  tr,
  blockquote,
  .callout,
  .md-alert {
    break-inside: avoid;
    page-break-inside: avoid;
  }

  /* Avoid leaving a single short line at top or bottom */
  p:last-child,
  p:first-child {
    page-break-inside: avoid;
  }

  /* Headings should pull at least some content with them */
  h1 + p,
  h2 + p,
  h3 + p,
  h4 + p {
    page-break-before: avoid;
  }

  /* Lists should not strand a single item */
  ul,
  ol {
    orphans: 2;
    widows: 2;
  }
}

@media print {
  h1, h2, h3, h4, h5, h6 {
    break-before: auto;
    page-break-before: auto;
    margin-top: 2.5em;
  }
}
@media print {
  .page-break {
    page-break-before: always;
    break-before: page;
  }
}
